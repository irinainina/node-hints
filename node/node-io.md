## Неблокирующий ввод/вывод

### I/O (input/output)
I/O (input/output) означает ввод/вывод
- input - получение информации от сетевых ресурсов, или чтение с диска или файла, или ввод с клавиатуры
- output - вывод информации, например, сохранение на диск или запись в файл, или вывод в консоль

Это самые затратные по времени этапы работы программы
![](../node/images/io.png)

### Блокирующий IO
Операции input/output происходят синхронно, одна за другой
```js
const connection = db.connect();	// подключаемся к базе данных
const users = connection.query('SELECT * FROM users'); // делаем запрос
console.log(users); // выводим информацию в консоль
```
Это простой в реализации, но очень затратный по времени вариант - программа ждёт 250 миллионов тактов процессора, пока не произойдёт подключение к базе данных.  
Вторая проблема синхронного IO - он не отказоустойчив. Если программа не сможет подключиться к базе данных, или если в базе данных не найдётся затребованной информации, программа остановит свою работу.

Синхронный или блокирующий IO в Node.js используется очень редко:
- если необходимо получить данные, без которых работа программы не может начаться. Например, информацию о настройках
- может использоваться в консольных приложениях, у которых только один пользователь

### Неблокирующий IO
Неблокирующий IO происходит асинхронно
```js
db.connect((error, connection) => {
  if (error) throw error;
  connection.query('SELECT * FROM users', users => {
    console.log(users);
  });
});
```
В данном примере программа выполняет только один метод `db.connect()` и переходит к выполнению оставшейся части кода. Когда весь код выполнен, программа возвращается к `db.connect()`.

Первым аргументом `db.connect()` является ошибка. Если значение ошибки `true`, асинхронная функция выбрасывает ошибку и прекращает свою работу. Если ошибки нет - значение ошибки `false` - функция переходит к работе с базой данных: выполняет `connection.query()` и `console.log()`.

В основе работы Node.js лежит **асинхронность**. В дополнение к **неблокирующему вводу/выводу** это позволяет приложению на Node.js работать намного быстрее и обслуживать намного больше клиентских запросов в единицу времени, чем аналогичному приложению, разработанному на большинстве других языков программирования.

// TODO добавить задание на асинхронность - переписать синхронную функцию асинхронно